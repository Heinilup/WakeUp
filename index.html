<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Wakeup by Heinilup</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Wakeup</h1>
        <h2>Repeating Screen ON use Alarm repeat.</h2>
        <a href="https://github.com/Heinilup/WakeUp" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="repeating-screen-on-by-scheduled" class="anchor" href="#repeating-screen-on-by-scheduled" aria-hidden="true"><span class="octicon octicon-link"></span></a>Repeating Screen On by scheduled</h1>

<ul>
<li>use system API Alarm Repeat.</li>
<li>Set how long to repeat the scheduled.</li>
<li>Some notes below:</li>
</ul>

<hr>

<h3>
<a id="alarmmanager" class="anchor" href="#alarmmanager" aria-hidden="true"><span class="octicon octicon-link"></span></a>AlarmManager</h3>

<ol>
<li>RTC_WAKEUP</li>
<li>RTC</li>
<li>ELAPSED_REALTIME_WAKEUP</li>
<li>ELAPSED_REALTIME</li>
</ol>

<hr>

<h3>
<a id="set-wake-up-by-screenlock-state" class="anchor" href="#set-wake-up-by-screenlock-state" aria-hidden="true"><span class="octicon octicon-link"></span></a>Set Wake up by ScreenLock state</h3>

<pre><code>win.addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED
            | WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD
            | WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON
            | WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);

PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
    PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.ACQUIRE_CAUSES_WAKEUP | PowerManager.SCREEN_DIM_WAKE_LOCK, "bright");
    //点亮屏幕
    wl.acquire();
    Toast.makeText(context, R.string.repeating_wake,
            Toast.LENGTH_LONG).show();
    //释放
    wl.release();
</code></pre>

<h3>
<a id="关于这个屏幕唤醒" class="anchor" href="#%E5%85%B3%E4%BA%8E%E8%BF%99%E4%B8%AA%E5%B1%8F%E5%B9%95%E5%94%A4%E9%86%92" aria-hidden="true"><span class="octicon octicon-link"></span></a>关于这个屏幕唤醒</h3>

<ul>
<li>使用系统Alarm API调用循环唤醒</li>
<li>设定AlarmManager的启动方式，看文档4种启动方式的不同，在这就不说明具体使用方法了。</li>
<li>
<p>设置休眠状态唤醒有以下2点第一点就是在</p>

<pre><code>setContentView(R.layout.activity_main);
</code></pre>
</li>
<li>之前插入</li>
<li>
    final Window win = getWindow();
    win.addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED
            | WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD
            | WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON
            | WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);</li>
<li>第二就是在RepeatingAlarm里面调用 PowerManager方法</li>
<li>
     PowerManager pm = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
    PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.ACQUIRE_CAUSES_WAKEUP | PowerManager.SCREEN_DIM_WAKE_LOCK, "bright");
    //点亮屏幕
    wl.acquire();
    Toast.makeText(context, R.string.repeating_wake,
            Toast.LENGTH_LONG).show();
    //释放
    wl.release();</li>
<li>
<p>在清单文件加入标注</p>

<pre><code>&lt;receiver android:name=".RepeatingAlarm" android:process=":remote"&gt;
    &lt;intent-filter&gt;
        &lt;action android:name=".AlarmActivity"/&gt;
    &lt;/intent-filter&gt;
&lt;/receiver&gt;
</code></pre>
</li>
<li>目前有BUG问题，停止广播失效 ，保存时间待添加</li>
<li>08/24 已经解决这个问题由于广播接受者Recevie里面TOAST引起的错误。</li>
</ul>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/Heinilup/WakeUp/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/Heinilup/WakeUp/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/Heinilup/WakeUp"></a> is maintained by <a href="https://github.com/Heinilup">Heinilup</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
